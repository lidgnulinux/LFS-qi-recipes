# Build recipe for lftp.
#
# Exit immediately on any error
set -e

program=lftp
version=4.9.3
release=0
pkgcategory=tools
description="Sophisticated ftp/http client"
homepage=https://lftp.tech
license="GPL-3.0-or-later"

tarname=${program}-${version}.tar.xz
fetch=https://lftp.yar.ru/ftp/$tarname

build()
{
    unpack "${tardir}/$tarname"

    cd "$srcdir"

    # Set sane permissions
    chmod -R u+w,go-w,a+rX-s .
	
    autoreconf -vif
    ./configure \
	--prefix=/usr \
	--sysconfdir=/etc \
	--without-openssl \
	--with-modules \
	--with-gnutls \
	--disable-nls \
	--disable-static \
	--enable-threads=posix
    
    make -j2
    make DESTDIR="$destdir" install
    rm -f "$destdir"/usr/lib/charset.alias
}
